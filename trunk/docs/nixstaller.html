<html>

<head>
  <title>Nixstaller 0.1 documentation</title>
</head>

<p>

<h1><strong>Nixstaller documentation</strong></h1>
<hr>

<br><br>

<p>
<h2>Table of contents</h2>
<ul>
   <li><A href="#intro" name="toc-intro">Introduction</A></li>
   <li><A href="#qstart" name="toc-qstart">Quick start</A></li>
   <li><A href="#basics" name="toc-first">Basics</A></li>
   <li><A href="#config" name="toc-config">Configuration files</A></li>
   <li><A href="create" name="toc-create">Creating an install package</A></li>
   <li><A href="#compile" name="toc-compile">Compiling nixstaller</A></li>
   <li><A href="#faq" name="toc-faq">Frequently Asked Questions (FAQ)</A></li>
</ul>
</p>

<br>

<p>
<h2><A href="#toc-intro" name="intro">Introduction</h2></A>
This document will describe how to use nixstaller to create installers for unix like systems.<br>
If you can't wait you can read the <A href="#qstart">Quick start section</A>.<br>
<br>
<h3>Features</h3>
Here is a list with the main features. Read further for more info to see what they do and how to use them.<br>

<ul>
   <li>2 different frontends used for the installer: <A href="http://www.fltk.org">FLTK</A> and <A href="http://www.gnu.org/software/ncurses/ncurses.html">ncurses</A> using <A href="http://invisible-island.net/cdk/">CDK</A> </li>
   <li>Support for the following OS'es: Linux, FreeBSD and NetBSD.</li>
   <li>An installer itself has the following features:</li>
   <ul>
      <li>Can be translated(no UTF yet). Dutch and english translations are supplied by default</li>
      <li>Screen where the user can choose the language</li>
      <li>Optional intro screen with customizable image and text</li>
      <li>Optional screen where a user have to accept a license agreement</li>
      <li>Optional screen where the user has to select a destination directory</li>
      <li>Optional screen where the user can set parameters used by installation commands</li>
      <li>Installation progress screen</li>
      <li>Optional screen which appears when the installation is done</li>
   </ul>
   <li>Commands which can be executed after file extraction. The parameters used by these commands can be customized by the end user during installation.</li>
   <li>Files that come with the installer can be either extracted to a temporary directory, a given directory or a directory specified by the user.</li>
   <li>Installation files can be compressed with either gzip or bzip2</li>
   <li>Frontends are almost completly staticly linked. This way the end user doesn't have to worry about missing dependencies for the installer itself.</li>
 </ul>
</p>

<p>
<h2><A href="#toc-qstart" name="qstart">Quick start</h2></A>
Meh...just read the tutorial :)<br>
</p>

<p>
<h2><A href="#toc-first" name="basics">Basics</h2></A>
In this section the main things will be explained so you can get a idea how to use nixstaller and what it can do.<br>

<p><h3>Installation package</h3>
The goal of nixstaller is to create a installation package. This package contains the following things:<br>
<ul>
   <li>One or more frontends for the installer.</li>
   <li>A config file which tells what the installer should do.</li>
   <li>Language files for translations.</li>
   <li>Some (optional) text files containing the welcome message, the license agreement and a message after the installation is finished.</li>
   <li>An archive containing the actual files that the installer should use for installation(eg your program and its required files).</li>
   <li>Optional: an archive containing OS specific files that should be used for installation.</li>
   <li>A few required libs which couldn't be linked staticly.</li>
 </ul>
</p>
<br>
From these files will be a self extracting archive made(with the help of <A href="http://www.megastep.org/makeself/">makeself</A>). <br>
The creation of a package is discussed in section <A href="#create">Creating an install package</A>.

<p>
<h3>Frontends</h3>
Currently there are 2 frontends used for the installer: The first is using <A href="http://www.fltk.org">FLTK</A> and the second uses <A href="http://www.gnu.org/software/ncurses/ncurses.html">ncurses</A> with <A href="http://invisible-island.net/cdk/">CDK</A>.
If the the installer starts it will check if the user is running X. If it is so it will launch the FLTK frontend, otherwise the ncurses frontend will be launched.<br>
You can specifiy manually which frontends will be included in the installer package.
</p>
</p>

<p><h3>Config file</h3>
To configure the installer you need to make/edit a simple config file. There are several examples in the example/ directory.<br>
Please read the <A href="#config">Configuration files section</A> to know what to put in that file.
</p>

<p><h3>Language files</h3>
In order to translate the text used by the installer you must use a translation file. This file is simply called 'strings' and will contain all (english) strings used by the installer with the translation beneath it.
Language files are stored in a subdirectory in the lang/ directory. The subdirectory should be the name of the language itself.

Here is a example taken from the file 'lang/dutch/strings':<br>

<br>
<em>License Agreement<br>
Licentie overeenkomst<br></em>
<br>

"Licentie overeenkomst" is dutch for "License Agreement". Its very important that the english text(the first line) is exactly the same as used by the installer.<br>
If you read further in this file you will see the following sentence:<br>

<br>
<em>Installation of %s complete!<br>
Installatie van %s gereed!<br></em>
<br>

Notice the '%s'? The '%s' will be replaced by the installer with another string. This can be all kind of things, in this case it is the program name.<br>
<br>
<strong>IMPORTANT:</strong> Currently there is no UTF support yet. This means that you can't use any 'special' characters yet.<br>
<br>

<strong>Other things that can be translated</strong><br>
There are other things to be translated aswell: The welcome message, the license agreement, the 'finish message' and the descriptions used for the install parameters. Read the following sections how to translate those.
</p>

<p><h3>Welcome message, license agreement and the 'finish message'</h3>
<strong>Welcome message</strong><br>
The welcome message is what will be displayed right after the user selected a language.<br>
<br>

<strong>License agreement</strong><br>
The user can agree to a license agreement after the welcome message.<br>
<br>

<strong>'Finish message'</strong><br>
This is the message that will be displayed after the installation has (succesfully) ended.<br>
<br>

All these items are stored in plain text files.<br>
The filenames for the welcome message, license agreement and finish message are respectively: 'welcome', 'license' and 'finish'.<br>
See section <A href="#create">Creating an install package</A> for more info where to put these files.
</p>

<p><h3>The installation</h3>
<strong>Destination directory</strong><br>
There are 3 ways where the files can are extracted to:
<ol>
   <li>Specifified: During installation the user can say where they want to have their files (default)</li>
   <li>Temporaray: This is especially usefull for files which have to be compiled. The files will be extracted to a temporary directory and after that some {install commands} are called(such as './configure && make && make install) to prepare the package further for installation. After the installation is finished the files will be removed.</li>
   <li>A given directory. The files will always be extracted to this directory.</li>
</ol>
<br>

<strong>Install commands</strong><br>
After all the files are extracted some (optional) shell commands can be called in this directory. A good example for this is to compile a package.<br>
<br>
<em>Root access</em><br>
Some commands(ie 'make install') may require root privileges. There are 2 ways to specify this:<br>
<ol>
   <li>Always: This command requires it, no matter what.</li>
   <li>Dependent: It depends on something else. Currently this can only be a directory specified by a parameter for this or another command. A good example to use this is 'make install' which depends on the --prefix parameter for configure. If the prefix points to an directory where the user doesn't have write access, 'make install' will need root access.</li>
</ol><br>
If a command requests root access a dialog will pop up asking the user to give the root password. The command will then be executed with 'su'.<br>
<br>
<em>Parameters</em><br>
Some commands (ie 'configure') may need commandline parameters(such as --prefix). Parameters such as the '--prefix' one can be configured (ie --prefix=/usr/local). If you specify these parameters in the {config file} the user can do so during installation. A screen will pop up before the installation begins where the user can configure each parameter specified in the config file.<br>
Currently there are 4 ways to configure a parameter:
<ol>
   <li>One that can be simply enabled or disabled (if disabled the parameter won't be used when executing the install command).</li>
   <li>String: The user can simply specify a text.</li>
   <li>Choice list: A menu will pop up where the user can specify a value.</li>
   <li>Directory: The user can specify a directory.</li>
</ol>
Here is an example: Lets say the command is './configure' and you have set '--prefix=' as a configurable parameter with as type 'directory'. Now right before the installation begins the user changes the directory for the prefix to '/usr'. the configure command will now look like this:<br>
<br>
<em>./configure --prefix=/usr</em><br>
<br>

You can set a default for each parameter, so that the user doesn't have to bother with everything.<br>
<br>
For each parameter you can also give a (short) description. If you add this description to one or more {language files} it will be translated when its shown.<br>
<br>
More info at the {config section}.

<p>
<h2><A href="#toc-config" name="config">Configuration files</h2></A>
The config file is used to specify what the installer should do and how the package must be created.<br>
Config files can be very simple and small for simple installations.<br>
<br>
<p><h3>General section</h3>
In this section you can put the general options for the installer. For installers without any install commands this is the only section used in the configuration file.<br>
<br>

<strong>appname</strong><br>
Sets the name of the package that is going to be installed.<br>
<br>
<em>Usage: appname nameofapphere</em><br>
<br>
<em>Example: appname test</em><br>
<br>
<br>

<strong>archtype</strong><br>
Sets which archive type to use for packing the package that is going to be installed.<br>
<br>
<em>Usage: archtype gzip|bzip2</em><br>
<br>
<em>Example: archtype bzip2</em><br>
<br>
<em>Default: gzip</em><br>
<br>
<br>

<strong>installdir</strong><br>
Sets where the install package files should be extracted too (see {insdir section} ).<br>
<br>
<em>Usage: installdir select|temp|default dirnamehere</em><br>
select: Let the user specify the install directory.<br>
temp: Extract files to a temporary directory.<br>
default: Extract the files specified by 'dirnamehere'.<br>
<br>
<em>Example: installdir default /usr/local</em><br>
<br>
<em>Default: select</em><br>
<br>
<em>Note: The user should have permission the installation directory.</em><br>
<br>
<br>

<strong>languages</strong><br>
Specifies a list of used languages.<br>
<br>
<em>Usage: languages lang1 lang2 lang3 ...</em><br>
<br>
<em>Example: languages english dutch</em><br>
<br>
<em>Default: english</em><br>
<br>
<br>

<strong>intropic</strong><br>
Specifies a picture which should be displayed at the welcome screen.<br>
Valid types are: jpg, png, gif and bmp.<br>
<br>
<em>Usage: intropic picnamehere</em><br>
<br>
<em>Example: intropic intro.jpg</em><br>
<br>
<br>

<strong>commandentry</strong><br>
Start point of a {commandentry}.<br>
<br>
<em>Usage:<br>
commandentry<br>
[<br>
...<br>
options for a commandentry here<br>
...<br>
]<br></em><br>
<br>

</p>
</p>

<p>
<h2><A href="#toc-create" name="create">Creating an install package</h2></A>
First undone line.<br>
Second undone line.<br>
</p>

<p>
<h2><A href="#toc-compile" name="compile">Compiling nixstaller</h2></A>
First undone line.<br>
Second undone line.<br>
</p>

<p>
<h2><A href="#toc-faq" name="faq">Frequently Asked Questions (FAQ)</h2></A>
First undone line.<br>
Second undone line.<br>
</p>

</body>
</html>
